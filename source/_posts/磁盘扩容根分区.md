---
title: 磁盘扩容
date: 2023-12-15 10:27:28
description: Linux磁盘扩容
type: "tags"
comments: true
categories:
- Learning Tools
- Linux
tags:
- Linux
- 磁盘
---
# 扩容脚本
```bash
#!/bin/bash

# 定义新磁盘，若当前磁盘分区不存在可使用fdisk提前划分。

disk=/dev/vda3
vg=***

pvcreate $disk 
vgextend "$vg" $disk 
lvextend /dev/${vg}/root $disk # xfs文件系统时，写入文件系统，使扩容生效 
xfs_growfs /dev/mapper/${vg}-root # ext文件系统用resize2fs命令替换xfs_growfs命令
```
# 详解

- 磁盘，使用fdisk进行硬盘分区，三个主分区(p)，其余都是拓展分区(e)。
- 物理卷(PV)，在逻辑卷管理系统最底层，可以是整个物理硬盘或实际物理硬盘上的分区。
- 卷组(VG)，建立在物理卷上，一卷组中至少要包括一物理卷，卷组建立后可动态的添加卷到卷组中，一个逻辑卷管理系统工程中可有多个卷组。对于LVM上面的文件系统而言，VG就是一个大磁盘。文件系统时看不到LVM下面的组成部分的，它只管使用，而LVM则负责管理下面的组成储存块。
- 逻辑卷(LV)，建立在卷组基础上，卷组中未分配空间可用于建立新的逻辑卷，逻辑卷建立后可以动态扩展和缩小空间。
- 物理区域(PE)，是物理卷中可用于分配的最小存储单元，物理区域大小在建立卷组时指定，一旦确定不能更改，同一卷组所有物理卷的物理区域大小需一致，新的pv(物理卷)加入到vg(卷组)后，pe(物理区域)的大小自动更改为vg(卷组)中定义的pe大小。
- 逻辑区域（LE），是逻辑卷中可用于分配的最小存储单元，逻辑区域的大小取决于逻辑卷所在卷组中的物理区域的大小。在同一个卷组中，LE的大小和PE是相同的，并且一一对应。
- 卷组描述区域：卷组描述区域存在于每个物理卷中，用于描述物理卷本身、物理卷所属卷组、卷组中逻辑卷、逻辑卷中物理区域的分配等所有信息，它是在使用pvcreate建立物理卷时建立的。
# xfs_growfs
- 扩展一个现存的XFS文件系统
